/* Amarande Remove Escape Area*/
ALTER_TRANS ~%tutu_var%AMARAN~
BEGIN 3 5 END
BEGIN 0 END
BEGIN
"ACTION" ~SetGlobal("X#RemovedEscape","GLOBAL",1)~
END

/* PDialogue repairs */
REPLACE_TRANS_ACTION %CORAN_POST% BEGIN 1 END BEGIN END ~SetGlobal("KickedOut","LOCALS",1)~ ~~ 
REPLACE_TRANS_ACTION %DYNAHEIR_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("Minsc",LeaveParty())~ ~ActionOverride("Minsc",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("Minsc",LeaveParty())~ 
REPLACE_TRANS_ACTION %DYNAHEIR_POST% BEGIN 8 END BEGIN END ~ActionOverride("Minsc",JoinParty())~ ~ActionOverride("Minsc",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("Minsc",JoinParty())~ 
REPLACE_TRANS_ACTION %EDWIN_POST% BEGIN 1 END BEGIN END ~SetGlobal("KickedOut","LOCALS",1)~ ~~ 
REPLACE_TRANS_ACTION %ELDOTH_POST% BEGIN 1 3 8 END BEGIN END ~ActionOverride("Skie",LeaveParty())~ ~ActionOverride("Skie",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("Skie",LeaveParty())~ 
REPLACE_TRANS_ACTION %ELDOTH_POST% BEGIN 6 END BEGIN END ~ActionOverride("Skie",JoinParty())~ ~ActionOverride("Skie",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("Skie",JoinParty())~ 
REPLACE_TRANS_ACTION %IMOEN_POST% BEGIN 4 END BEGIN END ~JoinParty()~ ~ActionOverride("imoen",JoinParty())~ 
REPLACE_TRANS_ACTION %JAHEIRA_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("Khalid",LeaveParty())~ ~ActionOverride("Khalid",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("Khalid",LeaveParty())~ 
REPLACE_TRANS_ACTION %JAHEIRA_POST% BEGIN 8 END BEGIN END ~ActionOverride("Khalid",JoinParty())~ ~ActionOverride("Khalid",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("Khalid",JoinParty())~ 
REPLACE_TRANS_ACTION %JAHEIRA_POST% BEGIN 7 END BEGIN END ~JoinParty()~ ~ActionOverride("jaheira",JoinParty())~ 
REPLACE_TRANS_ACTION %KHALID_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("jaheira",LeaveParty())~ ~ActionOverride("jaheira",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("jaheira",LeaveParty())~ 
REPLACE_TRANS_ACTION %KHALID_POST% BEGIN 8 END BEGIN END ~ActionOverride("jaheira",JoinParty())~ ~ActionOverride("jaheira",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("jaheira",JoinParty())~ 
REPLACE_TRANS_ACTION %MINSC_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("dynaheir",LeaveParty())~ ~ActionOverride("dynaheir",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("dynaheir",LeaveParty())~ 
REPLACE_TRANS_ACTION %MINSC_POST% BEGIN 7 END BEGIN END ~ActionOverride("dynaheir",JoinParty())~ ~ActionOverride("dynaheir",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("dynaheir",JoinParty())~ 
REPLACE_TRANS_ACTION %MONTARON_POST% BEGIN 1 3 7 END BEGIN END ~ActionOverride("Xzar",LeaveParty())~ ~ActionOverride("Xzar",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("Xzar",LeaveParty())~ 
REPLACE_TRANS_ACTION %MONTARON_POST% BEGIN 6 END BEGIN END ~JoinParty()~ ~SetGlobal("KickedOut","LOCALS",0) JoinParty()~ 
REPLACE_TRANS_ACTION %MONTARON_POST% BEGIN 8 END BEGIN END ~ActionOverride("Xzar",JoinParty())~ ~ActionOverride("Xzar",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("Xzar",JoinParty())~ 
REPLACE_TRANS_ACTION %QUAYLE_POST% BEGIN 4 END BEGIN END ~JoinParty()~ ~SetGlobal("KickedOut","LOCALS",0) JoinParty()~
REPLACE_TRANS_ACTION %SKIE_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("eldoth",LeaveParty())~ ~ActionOverride("eldoth",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("eldoth",LeaveParty())~ 
REPLACE_TRANS_ACTION %SKIE_POST% BEGIN 7 END BEGIN END ~ActionOverride("eldoth",JoinParty())~ ~ActionOverride("eldoth",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("eldoth",JoinParty())~ 
REPLACE_TRANS_ACTION %XZAR_POST% BEGIN 1 3 6 END BEGIN END ~ActionOverride("montaron",LeaveParty())~ ~ActionOverride("montaron",SetGlobal("KickedOut","LOCALS",1)) ActionOverride("montaron",LeaveParty())~ 
REPLACE_TRANS_ACTION %XZAR_POST% BEGIN 8 END BEGIN END ~ActionOverride("montaron",JoinParty())~ ~ActionOverride("montaron",SetGlobal("KickedOut","LOCALS",0)) ActionOverride("montaron",JoinParty())~ 
REPLACE_TRANS_ACTION %YESLICK_POST% BEGIN 1 END BEGIN END ~SetGlobal("KickedOut","LOCALS",1)~ ~~ 


/* YESLICK */
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 9 ~InteractingWith("kagain") RandomNum(8,1) Global("X#BIOYE1","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 10 ~InteractingWith("kagain") RandomNum(8,2) Global("X#BIOYE2","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 12 ~InteractingWith("kagain") RandomNum(8,3) Global("X#BIOYE3","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 17 ~InteractingWith("kagain") RandomNum(8,4) Global("X#BIOYE4","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 18 ~InteractingWith("kagain") RandomNum(8,5) Global("X#BIOYE5","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 19 ~InteractingWith("kagain") RandomNum(8,6) Global("X#BIOYE6","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 20 ~InteractingWith("kagain") RandomNum(8,7) Global("X#BIOYE7","LOCALS",0)~
REPLACE_STATE_TRIGGER %YESLICK_BANTER% 13 ~InteractingWith("kagain") RandomNum(8,8) Global("X#BIOYE8","LOCALS",0)~

ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 9 END BEGIN END ~SetGlobal("X#BIOYE1","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 10 END BEGIN END ~SetGlobal("X#BIOYE2","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 12 END BEGIN END ~SetGlobal("X#BIOYE3","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 17 END BEGIN END ~SetGlobal("X#BIOYE4","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 18 END BEGIN END ~SetGlobal("X#BIOYE5","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 19 END BEGIN END ~SetGlobal("X#BIOYE6","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 20 END BEGIN END ~SetGlobal("X#BIOYE7","LOCALS",1)~
ADD_TRANS_ACTION %YESLICK_BANTER% BEGIN 13 END BEGIN END ~SetGlobal("X#BIOYE8","LOCALS",1)~

/* XZAR */
REPLACE_STATE_TRIGGER %XZAR_BANTER% 0 ~InteractingWith("montaron") RandomNum(3,1) Global("X#BIOXZ1","LOCALS",0)~
REPLACE_STATE_TRIGGER %XZAR_BANTER% 1 ~InteractingWith("montaron") RandomNum(3,2) Global("X#BIOXZ2","LOCALS",0)~
REPLACE_STATE_TRIGGER %XZAR_BANTER% 2 ~InteractingWith("montaron") RandomNum(3,3) Global("X#BIOXZ3","LOCALS",0)~

ADD_TRANS_ACTION %XZAR_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOXZ1","LOCALS",1)~
ADD_TRANS_ACTION %XZAR_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOXZ2","LOCALS",1)~
ADD_TRANS_ACTION %XZAR_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOXZ3","LOCALS",1)~

/* XAN */
REPLACE_STATE_TRIGGER %XAN_BANTER% 0 ~InteractingWith("eldoth") RandomNum(3,1) Global("X#BIOXA1","LOCALS",0)~
REPLACE_STATE_TRIGGER %XAN_BANTER% 1 ~InteractingWith("eldoth") RandomNum(3,2) Global("X#BIOXA2","LOCALS",0)~
REPLACE_STATE_TRIGGER %XAN_BANTER% 2 ~InteractingWith("eldoth") RandomNum(3,3) Global("X#BIOXA3","LOCALS",0)~

ADD_TRANS_ACTION %XAN_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOXA1","LOCALS",1)~
ADD_TRANS_ACTION %XAN_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOXA2","LOCALS",1)~
ADD_TRANS_ACTION %XAN_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOXA3","LOCALS",1)~

/* VICONIA */
REPLACE_STATE_TRIGGER %VICONIA_BANTER% 0 ~InteractingWith("kivan") RandomNum(4,1) Global("X#BIOVI1","LOCALS",0)~
REPLACE_STATE_TRIGGER %VICONIA_BANTER% 8 ~InteractingWith("kivan") RandomNum(4,2) Global("X#BIOVI2","LOCALS",0)~
REPLACE_STATE_TRIGGER %VICONIA_BANTER% 9 ~InteractingWith("kivan") RandomNum(4,3) Global("X#BIOVI3","LOCALS",0)~
REPLACE_STATE_TRIGGER %VICONIA_BANTER% 10 ~InteractingWith("kivan") RandomNum(4,4) Global("X#BIOVI4","LOCALS",0)~

ADD_TRANS_ACTION %VICONIA_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOVI1","LOCALS",1)~
ADD_TRANS_ACTION %VICONIA_BANTER% BEGIN 8 END BEGIN END ~SetGlobal("X#BIOVI2","LOCALS",1)~
ADD_TRANS_ACTION %VICONIA_BANTER% BEGIN 9 END BEGIN END ~SetGlobal("X#BIOVI3","LOCALS",1)~
ADD_TRANS_ACTION %VICONIA_BANTER% BEGIN 10 END BEGIN END ~SetGlobal("X#BIOVI4","LOCALS",1)~

/* TIAX */
REPLACE_STATE_TRIGGER %TIAX_BANTER% 6 ~InteractingWith("quayle") RandomNum(7,1) Global("X#BIOTI1","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 7 ~InteractingWith("quayle") RandomNum(7,2) Global("X#BIOTI2","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 9 ~InteractingWith("quayle") RandomNum(7,3) Global("X#BIOTI3","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 14 ~InteractingWith("quayle") RandomNum(7,4) Global("X#BIOTI4","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 15 ~InteractingWith("quayle") RandomNum(7,5) Global("X#BIOTI5","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 16 ~InteractingWith("quayle") RandomNum(7,6) Global("X#BIOTI6","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 17 ~InteractingWith("quayle") RandomNum(7,7) Global("X#BIOTI7","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 10 ~InteractingWith("branwen") RandomNum(3,1) Global("X#BIOTI8","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 11 ~InteractingWith("branwen") RandomNum(3,2) Global("X#BIOTI9","LOCALS",0)~
REPLACE_STATE_TRIGGER %TIAX_BANTER% 12 ~InteractingWith("branwen") RandomNum(3,3) Global("X#BIOTI10","LOCALS",0)~

ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOTI1","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOTI2","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 9 END BEGIN END ~SetGlobal("X#BIOTI3","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 14 END BEGIN END ~SetGlobal("X#BIOTI4","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 15 END BEGIN END ~SetGlobal("X#BIOTI5","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 16 END BEGIN END ~SetGlobal("X#BIOTI6","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 17 END BEGIN END ~SetGlobal("X#BIOTI7","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 10 END BEGIN END ~SetGlobal("X#BIOTI8","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 11 END BEGIN END ~SetGlobal("X#BIOTI9","LOCALS",1)~
ADD_TRANS_ACTION %TIAX_BANTER% BEGIN 12 END BEGIN END ~SetGlobal("X#BIOTI10","LOCALS",1)~

/* Fix Tiax-Dorn Banter bug on BGEE */
ADD_TRANS_ACTION ~%TIAX_JOINED%~ BEGIN 2 END BEGIN END ~SetGlobal("DORN_TIAX","GLOBAL",3)~
	UNLESS ~SetGlobal("DORN_TIAX","GLOBAL",3)~


/* SKIE */
REPLACE_STATE_TRIGGER %SKIE_BANTER% 0 ~InteractingWith("eldoth") RandomNum(4,1) Global("X#BIOSK1","LOCALS",0)~
REPLACE_STATE_TRIGGER %SKIE_BANTER% 1 ~InteractingWith("eldoth") RandomNum(4,2) Global("X#BIOSK2","LOCALS",0)~
REPLACE_STATE_TRIGGER %SKIE_BANTER% 9 ~InteractingWith("eldoth") RandomNum(4,3) Global("X#BIOSK3","LOCALS",0)~
REPLACE_STATE_TRIGGER %SKIE_BANTER% 10 ~InteractingWith("eldoth") RandomNum(4,4) Global("X#BIOSK4","LOCALS",0)~

ADD_TRANS_ACTION %SKIE_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOSK1","LOCALS",1)~
ADD_TRANS_ACTION %SKIE_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOSK2","LOCALS",1)~
ADD_TRANS_ACTION %SKIE_BANTER% BEGIN 9 END BEGIN END ~SetGlobal("X#BIOSK3","LOCALS",1)~
ADD_TRANS_ACTION %SKIE_BANTER% BEGIN 10 END BEGIN END ~SetGlobal("X#BIOSK4","LOCALS",1)~

/* SHAR-TEEL */
REPLACE_STATE_TRIGGER %SHARTEEL_BANTER% 12 ~InteractingWith("eldoth") RandomNum(4,1) Global("X#BIOSH1","LOCALS",0)~
REPLACE_STATE_TRIGGER %SHARTEEL_BANTER% 13 ~InteractingWith("eldoth") RandomNum(4,2) Global("X#BIOSH2","LOCALS",0)~
REPLACE_STATE_TRIGGER %SHARTEEL_BANTER% 14 ~InteractingWith("eldoth") RandomNum(4,3) Global("X#BIOSH3","LOCALS",0)~
REPLACE_STATE_TRIGGER %SHARTEEL_BANTER% 15 ~InteractingWith("eldoth") RandomNum(4,4) Global("X#BIOSH4","LOCALS",0)~

ADD_TRANS_ACTION %SHARTEEL_BANTER% BEGIN 12 END BEGIN END ~SetGlobal("X#BIOSH1","LOCALS",1)~
ADD_TRANS_ACTION %SHARTEEL_BANTER% BEGIN 13 END BEGIN END ~SetGlobal("X#BIOSH2","LOCALS",1)~
ADD_TRANS_ACTION %SHARTEEL_BANTER% BEGIN 14 END BEGIN END ~SetGlobal("X#BIOSH3","LOCALS",1)~
ADD_TRANS_ACTION %SHARTEEL_BANTER% BEGIN 15 END BEGIN END ~SetGlobal("X#BIOSH4","LOCALS",1)~

/* SAFANA */
/* Fix Safana-Dorn Banter bug on BGEE */
ADD_TRANS_ACTION ~%SAFANA_JOINED%~ BEGIN 7 END BEGIN END ~SetGlobal("DORN_SAFANA_DIALOG1","GLOBAL",2)~
	UNLESS ~SetGlobal("DORN_SAFANA_DIALOG1","GLOBAL",2)~

/* QUAYLE */
REPLACE_STATE_TRIGGER %QUAYLE_BANTER% 0 ~InteractingWith("tiax") RandomNum(4,1) Global("X#BIOQU1","LOCALS",0)~
REPLACE_STATE_TRIGGER %QUAYLE_BANTER% 5 ~InteractingWith("tiax") RandomNum(4,2) Global("X#BIOQU2","LOCALS",0)~
REPLACE_STATE_TRIGGER %QUAYLE_BANTER% 6 ~InteractingWith("tiax") RandomNum(4,3) Global("X#BIOQU3","LOCALS",0)~
REPLACE_STATE_TRIGGER %QUAYLE_BANTER% 7 ~InteractingWith("tiax") RandomNum(4,4) Global("X#BIOQU4","LOCALS",0)~

ADD_TRANS_ACTION %QUAYLE_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOQU1","LOCALS",1)~
ADD_TRANS_ACTION %QUAYLE_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIOQU2","LOCALS",1)~
ADD_TRANS_ACTION %QUAYLE_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOQU3","LOCALS",1)~
ADD_TRANS_ACTION %QUAYLE_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOQU4","LOCALS",1)~

/* MONTARON NONE */

/* MINSC */
REPLACE_STATE_TRIGGER %MINSC_BANTER% 7 ~InteractingWith("dynaheir") RandomNum(2,1) Global("X#BIOMI1","LOCALS",0)~
REPLACE_STATE_TRIGGER %MINSC_BANTER% 8 ~InteractingWith("dynaheir") RandomNum(2,2) Global("X#BIOMI2","LOCALS",0)~

ADD_TRANS_ACTION %MINSC_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOMI1","LOCALS",1)~

ADD_TRANS_ACTION %MINSC_BANTER% BEGIN 8 END BEGIN END ~SetGlobal("X#BIOMI2","LOCALS",1)~

/* KIVAN */
REPLACE_STATE_TRIGGER %KIVAN_BANTER% 0 ~InteractingWith("viconia") RandomNum(5,1) Global("X#BIOKI1","LOCALS",0)~
REPLACE_STATE_TRIGGER %KIVAN_BANTER% 1 ~InteractingWith("viconia") RandomNum(5,2) Global("X#BIOKI2","LOCALS",0)~
REPLACE_STATE_TRIGGER %KIVAN_BANTER% 5 ~InteractingWith("viconia") RandomNum(5,3) Global("X#BIOKI3","LOCALS",0)~
REPLACE_STATE_TRIGGER %KIVAN_BANTER% 6 ~InteractingWith("viconia") RandomNum(5,4) Global("X#BIOKI4","LOCALS",0)~
REPLACE_STATE_TRIGGER %KIVAN_BANTER% 7 ~InteractingWith("viconia") RandomNum(5,5) Global("X#BIOKI5","LOCALS",0)~

ADD_TRANS_ACTION %KIVAN_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOKI1","LOCALS",1)~
ADD_TRANS_ACTION %KIVAN_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOKI2","LOCALS",1)~
ADD_TRANS_ACTION %KIVAN_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIOKI3","LOCALS",1)~
ADD_TRANS_ACTION %KIVAN_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOKI4","LOCALS",1)~
ADD_TRANS_ACTION %KIVAN_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOKI5","LOCALS",1)~

/* KHALID */
ADD_STATE_TRIGGER %KHALID_BANTER% 3 ~Global("X#BIOKH1","LOCALS",0)~
ADD_STATE_TRIGGER %KHALID_BANTER% 8 ~Global("X#BIOKH2","LOCALS",0)~

REPLACE_STATE_TRIGGER %KHALID_BANTER% 9 ~InteractingWith("xzar") RandomNum(2,2) Global("X#BIOKH3","LOCALS",0)~
REPLACE_STATE_TRIGGER %KHALID_BANTER% 10 ~InteractingWith("montaron") RandomNum(2,2) Global("X#BIOKH4","LOCALS",0)~

ADD_TRANS_ACTION %KHALID_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOKH1","LOCALS",1)~
ADD_TRANS_ACTION %KHALID_BANTER% BEGIN 8 END BEGIN END ~SetGlobal("X#BIOKH2","LOCALS",1)~
ADD_TRANS_ACTION %KHALID_BANTER% BEGIN 9 END BEGIN END ~SetGlobal("X#BIOKH3","LOCALS",1)~
ADD_TRANS_ACTION %KHALID_BANTER% BEGIN 10 END BEGIN END ~SetGlobal("X#BIOKH4","LOCALS",1)~

/* KAGAIN- NONE */

/* JAHEIRA */
ADD_STATE_TRIGGER %JAHEIRA_BANTER% 0 ~Global("X#BIOJA1","LOCALS",0)~
ADD_STATE_TRIGGER %JAHEIRA_BANTER% 3 ~Global("X#BIOJA2","LOCALS",0)~
ADD_STATE_TRIGGER %JAHEIRA_BANTER% 6 ~Global("X#BIOJA4","LOCALS",0)~
ADD_STATE_TRIGGER %JAHEIRA_BANTER% 7 ~Global("X#BIOJA5","LOCALS",0)~

REPLACE_STATE_TRIGGER %JAHEIRA_BANTER% 5 ~InteractingWith("khalid") RandomNum(3,2) Global("X#BIOJA3","LOCALS",0)~
REPLACE_STATE_TRIGGER %JAHEIRA_BANTER% 8 ~InteractingWith("khalid") Global("X#BIOJA6","LOCALS",0)~

ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOJA1","LOCALS",1)~
ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOJA2","LOCALS",1)~
ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIOJA3","LOCALS",1)~
ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOJA4","LOCALS",1)~
ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOJA5","LOCALS",1)~
ADD_TRANS_ACTION %JAHEIRA_BANTER% BEGIN 8 END BEGIN END ~SetGlobal("X#BIOJA6","LOCALS",1)~

/* IMOEN- NONE */

/* GARRICK */
ADD_STATE_TRIGGER %GARRICK_BANTER% 0 ~Global("X#BIOGA1","LOCALS",0)~
ADD_STATE_TRIGGER %GARRICK_BANTER% 1 ~Global("X#BIOGA2","LOCALS",0)~
ADD_STATE_TRIGGER %GARRICK_BANTER% 4 ~Global("X#BIOGA3","LOCALS",0)~
ADD_STATE_TRIGGER %GARRICK_BANTER% 5 ~Global("X#BIOGA4","LOCALS",0)~
ADD_STATE_TRIGGER %GARRICK_BANTER% 6 ~Global("X#BIOGA5","LOCALS",0)~
ADD_STATE_TRIGGER %GARRICK_BANTER% 7 ~Global("X#BIOGA6","LOCALS",0)~

ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOGA1","LOCALS",1)~
ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOGA2","LOCALS",1)~
ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 4 END BEGIN END ~SetGlobal("X#BIOGA3","LOCALS",1)~
ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIOGA4","LOCALS",1)~
ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOGA5","LOCALS",1)~
ADD_TRANS_ACTION %GARRICK_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOGA6","LOCALS",1)~

/* FALDORN */
ADD_STATE_TRIGGER %FALDORN_BANTER% 0 ~Global("X#BIOFA1","LOCALS",0)~
ADD_STATE_TRIGGER %FALDORN_BANTER% 1 ~Global("X#BIOFA2","LOCALS",0)~
ADD_STATE_TRIGGER %FALDORN_BANTER% 2 ~Global("X#BIOFA3","LOCALS",0)~
ADD_STATE_TRIGGER %FALDORN_BANTER% 3 ~Global("X#BIOFA4","LOCALS",0)~

ADD_TRANS_ACTION %FALDORN_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOFA1","LOCALS",1)~
ADD_TRANS_ACTION %FALDORN_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOFA2","LOCALS",1)~
ADD_TRANS_ACTION %FALDORN_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOFA3","LOCALS",1)~
ADD_TRANS_ACTION %FALDORN_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOFA4","LOCALS",1)~

/* ELDOTH */
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 17 ~InteractingWith("sharteel") RandomNum(4,1) Global("X#BIOEL1","LOCALS",0)~
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 18 ~InteractingWith("sharteel") RandomNum(4,2) Global("X#BIOEL2","LOCALS",0)~
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 19 ~InteractingWith("sharteel") RandomNum(4,3) Global("X#BIOEL3","LOCALS",0)~
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 20 ~InteractingWith("sharteel") RandomNum(4,4) Global("X#BIOEL4","LOCALS",0)~
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 21 ~InteractingWith("xan") RandomNum(2,1) Global("X#BIOEL5","LOCALS",0)~
REPLACE_STATE_TRIGGER %ELDOTH_BANTER% 22 ~InteractingWith("xan") RandomNum(2,2) Global("X#BIOEL6","LOCALS",0)~

ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 17 END BEGIN END ~SetGlobal("X#BIOEL1","LOCALS",1)~
ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 18 END BEGIN END ~SetGlobal("X#BIOEL2","LOCALS",1)~
ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 19 END BEGIN END ~SetGlobal("X#BIOEL3","LOCALS",1)~
ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 20 END BEGIN END ~SetGlobal("X#BIOEL4","LOCALS",1)~
ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 21 END BEGIN END ~SetGlobal("X#BIOEL5","LOCALS",1)~
ADD_TRANS_ACTION %ELDOTH_BANTER% BEGIN 22 END BEGIN END ~SetGlobal("X#BIOEL6","LOCALS",1)~

// REPLACE_STATE_TRIGGER %ELDOTH_JOINED% 0 ~Global("EldothMove","GLOBAL",0) InParty("eldoth") AreaCheck("FW0100")~

REPLACE_STATE_TRIGGER ~%tutu_var%ELDOTH~ 8 ~Global("EldothMove","GLOBAL",0) InParty("eldoth") AreaCheck("%NWBaldursGate%")~

/* EDWIN */
ADD_STATE_TRIGGER %EDWIN_BANTER% 3 ~Global("X#BIOED1","LOCALS",0)~
ADD_STATE_TRIGGER %EDWIN_BANTER% 14 ~Global("X#BIOED2","LOCALS",0)~

ADD_TRANS_ACTION %EDWIN_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOED1","LOCALS",1)~
ADD_TRANS_ACTION %EDWIN_BANTER% BEGIN 14 END BEGIN END ~SetGlobal("X#BIOED2","LOCALS",1)~


/* DYNAHEIR */
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 0 ~Global("X#BIODY1","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 5 ~Global("X#BIODY2","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 6 ~Global("X#BIODY3","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 7 ~Global("X#BIODY4","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 12 ~Global("X#BIODY5","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 15 ~Global("X#BIODY6","LOCALS",0)~
ADD_STATE_TRIGGER %DYNAHEIR_BANTER% 16 ~Global("X#BIODY7","LOCALS",0)~

ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIODY1","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIODY2","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIODY3","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIODY4","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 12 END BEGIN END ~SetGlobal("X#BIODY5","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 15 END BEGIN END ~SetGlobal("X#BIODY6","LOCALS",1)~
ADD_TRANS_ACTION %DYNAHEIR_BANTER% BEGIN 16 END BEGIN END ~SetGlobal("X#BIODY7","LOCALS",1)~

/* CORAN */
REPLACE_STATE_TRIGGER %CORAN_BANTER% 0 ~InteractingWith("safana") RandomNum(9,1) Global("X#BIOCO1","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 1 ~InteractingWith("safana") RandomNum(9,2) Global("X#BIOCO2","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 2 ~InteractingWith("safana") RandomNum(9,3) Global("X#BIOCO3","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 3 ~InteractingWith("safana") RandomNum(9,4) Global("X#BIOCO4","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 4 ~InteractingWith("safana") RandomNum(9,5) Global("X#BIOCO5","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 5 ~InteractingWith("safana") RandomNum(9,6) Global("X#BIOCO6","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 6 ~InteractingWith("safana") RandomNum(9,7) Global("X#BIOCO7","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 7 ~InteractingWith("safana") RandomNum(9,8) Global("X#BIOCO8","LOCALS",0)~
REPLACE_STATE_TRIGGER %CORAN_BANTER% 8 ~InteractingWith("safana") RandomNum(9,9) Global("X#BIOCO9","LOCALS",0)~

ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOCO1","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOCO2","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOCO3","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOCO4","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 4 END BEGIN END ~SetGlobal("X#BIOCO5","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 5 END BEGIN END ~SetGlobal("X#BIOCO6","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 6 END BEGIN END ~SetGlobal("X#BIOCO7","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 7 END BEGIN END ~SetGlobal("X#BIOCO8","LOCALS",1)~
ADD_TRANS_ACTION %CORAN_BANTER% BEGIN 8 END BEGIN END ~SetGlobal("X#BIOCO9","LOCALS",1)~

/* BRANWEN */
REPLACE_STATE_TRIGGER %BRANWEN_BANTER% 2 ~InteractingWith("tiax") RandomNum(2,1) Global("X#BIOBR3","LOCALS",0)~

ADD_STATE_TRIGGER %BRANWEN_BANTER% 0 ~Global("X#BIOBR1","LOCALS",0)~
ADD_STATE_TRIGGER %BRANWEN_BANTER% 1 ~Global("X#BIOBR2","LOCALS",0)~

ADD_TRANS_ACTION %BRANWEN_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOBR1","LOCALS",1)~
ADD_TRANS_ACTION %BRANWEN_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOBR2","LOCALS",1)~
ADD_TRANS_ACTION %BRANWEN_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOBR3","LOCALS",1)~

/* AJANTIS */
ADD_STATE_TRIGGER %AJANTIS_BANTER% 0 ~Global("X#BIOAJ1","LOCALS",0)~
ADD_STATE_TRIGGER %AJANTIS_BANTER% 1 ~Global("X#BIOAJ2","LOCALS",0)~
ADD_STATE_TRIGGER %AJANTIS_BANTER% 2 ~Global("X#BIOAJ3","LOCALS",0)~
ADD_STATE_TRIGGER %AJANTIS_BANTER% 3 ~Global("X#BIOAJ4","LOCALS",0)~
ADD_STATE_TRIGGER %AJANTIS_BANTER% 4 ~Global("X#BIOAJ5","LOCALS",0)~

ADD_TRANS_ACTION %AJANTIS_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOAJ1","LOCALS",1)~
ADD_TRANS_ACTION %AJANTIS_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOAJ2","LOCALS",1)~
ADD_TRANS_ACTION %AJANTIS_BANTER% BEGIN 2 END BEGIN END ~SetGlobal("X#BIOAJ3","LOCALS",1)~
ADD_TRANS_ACTION %AJANTIS_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOAJ4","LOCALS",1)~
ADD_TRANS_ACTION %AJANTIS_BANTER% BEGIN 4 END BEGIN END ~SetGlobal("X#BIOAJ5","LOCALS",1)~

/* ALORA */
ADD_STATE_TRIGGER %ALORA_BANTER% 0 ~Global("X#BIOAL1","LOCALS",0)~
ADD_STATE_TRIGGER %ALORA_BANTER% 1 ~Global("X#BIOAL2","LOCALS",0)~
ADD_STATE_TRIGGER %ALORA_BANTER% 3 ~Global("X#BIOAL3","LOCALS",0)~
ADD_STATE_TRIGGER %ALORA_BANTER% 4 ~Global("X#BIOAL4","LOCALS",0)~

ADD_TRANS_ACTION %ALORA_BANTER% BEGIN 0 END BEGIN END ~SetGlobal("X#BIOAL1","LOCALS",1)~
ADD_TRANS_ACTION %ALORA_BANTER% BEGIN 1 END BEGIN END ~SetGlobal("X#BIOAL2","LOCALS",1)~
ADD_TRANS_ACTION %ALORA_BANTER% BEGIN 3 END BEGIN END ~SetGlobal("X#BIOAL3","LOCALS",1)~
ADD_TRANS_ACTION %ALORA_BANTER% BEGIN 4 END BEGIN END ~SetGlobal("X#BIOAL4","LOCALS",1)~

/* Patching "unhappiness" P-file entries */
/* BGEE does not use the IHATEYOUALL variable
ADD_TRANS_ACTION ~_YESLIP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_XZARP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_XZARP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_VICONP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_XANP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_TIAXP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_SKIEP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_SKIEP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_SHARTP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_SAFANP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_QUAYLP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_MONTAP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_MONTAP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_MINSCP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_MINSCP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_KIVANP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_KHALIP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_KHALIP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_KAGAIP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_JAHEIP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_JAHEIP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_IMOENP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_GARRIP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_ELDOTP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_ELDOTP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_EDWINP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_DYNAHP~ BEGIN 2 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_DYNAHP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_CORANP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_BRANWP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_ALORAP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_AJANTP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
ADD_TRANS_ACTION ~_FALDOP~ BEGIN 3 END BEGIN END ~SetGlobal("IHATEYOUALL","LOCALS",0) ChangeAIScript("",DEFAULT)~
*/

REPLACE_ACTION_TEXT ~%tutu_var%MINSC~ ~ActionOverride("jaheira",LeaveParty())[^!]*ActionOverride("jaheira",EscapeArea())~ ~ActionOverride("dynaheir",LeaveParty()) ActionOverride("dynaheir",EscapeArea())~